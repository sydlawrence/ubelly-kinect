/*! getUserMedia - v0.5.0 - 4/21/2012
* https://github.com/addyosmani/getUserMedia.js
* Copyright (c) 2012 addyosmani; Licensed MIT */
(function(a,b){"use strict",a.getUserMedia=function(c,d,e){navigator.getUserMedia_=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var f=function(a){var c=b.createElement("iframe"),d=b.body||b.documentElement,e=!0,f=!0,g=function(){},h;d.appendChild(c),h=a.frames[a.frames.length-1],h.navigator.getUserMedia=h.navigator.getUserMedia||(h.navigator.getUserMedia=h.navigator.webkitGetUserMedia||h.navigator.mozGetuserMedia||h.navigator.msGetUserMedia);try{h.navigator.getUserMedia({video:!0,audio:!0},g)}catch(i){f=!1;try{h.navigator.getUserMedia("video, audio",g)}catch(i){e=!1}}finally{d.removeChild(c),c=null}return{string:e,object:f}}(a);if(!navigator.getUserMedia_){var m,n,o;m='<object id="XwebcamXobjectX" type="application/x-shockwave-flash" data="'+c.swffile+'" width="'+c.width+'" height="'+c.height+'"><param name="movie" value="'+c.swffile+'" /><param name="FlashVars" value="mode='+c.mode+"&amp;quality="+c.quality+'" /><param name="allowScriptAccess" value="always" /></object>',n=b.getElementById(c.el),n.innerHTML=m,function p(f){o=b.getElementById("XwebcamXobjectX"),o.capture!==undefined?(c.capture=function(a){try{return o.capture(a)}catch(b){}},c.save=function(a){try{return o.save(a)}catch(b){}},c.setCamera=function(a){try{return o.setCamera(a)}catch(b){}},c.getCameraList=function(){try{return o.getCameraList()}catch(a){}},c.context="flash",c.onLoad=d):f===0?e():a.setTimeout(p,1e3*(4-f),f-1)}(3)}else{if(!f.string&&!f.object)return undefined;var g;f.string?c.video&&c.audio?g="video, audio":c.video?g="video":c.audio&&(g="audio"):f.object&&(c.video&&(g.video=!0),c.audio&&(g.audio=!0));var h,i,j,k,l;h=b.getElementById(c.el),i=b.createElement("video"),k=parseInt(h.offsetWidth,10),l=parseInt(h.offsetHeight,10),c.width<k&&c.height<l&&(c.width=k,c.height=l),i.width=c.width,i.height=c.height,i.autoplay=!0,h.appendChild(i),j=i,c.videoEl=j,c.context="webrtc",navigator.getUserMedia_(g,d,e)}}})(this,document)